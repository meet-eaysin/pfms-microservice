# PFMS Production Environment Configuration
# ============================================
# SECURITY: This file contains sensitive configuration
# - Never commit actual production values to version control
# - Use a secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.)
# - Rotate credentials regularly
# - Use strong, unique passwords (minimum 32 characters)

# ============================================
# NODE ENVIRONMENT
# ============================================
NODE_ENV=production
SERVICE_VERSION=1.0.0
LOG_LEVEL=info
ENABLE_SWAGGER=false
ENABLE_METRICS=true

# ============================================
# DATABASE - PostgreSQL (Per-Service)
# ============================================
# Auth Service Database
POSTGRES_AUTH_USER=postgres
POSTGRES_AUTH_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
DATABASE_URL=postgresql://${POSTGRES_AUTH_USER}:${POSTGRES_AUTH_PASSWORD}@postgres-auth:5432/auth_db

# Expense Service Database
POSTGRES_EXPENSE_USER=postgres
POSTGRES_EXPENSE_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS

# ============================================
# REDIS - Cache & Session Store
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
REDIS_DB=0
REDIS_SSL=false
REDIS_KEY_PREFIX=pfms:
REDIS_CACHE_TTL=3600
REDIS_SESSION_TTL=86400

# ============================================
# RABBITMQ - Message Queue
# ============================================
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=pfms_admin
RABBITMQ_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
RABBITMQ_VHOST=/
RABBITMQ_PREFETCH=10
RABBITMQ_HEARTBEAT=60
RABBITMQ_CONNECTION_TIMEOUT=30000
RABBITMQ_PERSISTENT=true

# ============================================
# MONGODB (For AI/Analytics Service)
# ============================================
MONGODB_HOST=mongodb
MONGODB_PORT=27017
MONGODB_NAME=pfms_analytics
MONGODB_USER=pfms_admin
MONGODB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
MONGODB_URL=mongodb://${MONGODB_USER}:${MONGODB_PASSWORD}@${MONGODB_HOST}:${MONGODB_PORT}/${MONGODB_NAME}?authSource=admin

# ============================================
# AUTHENTICATION & JWT
# ============================================
# CRITICAL: Generate strong secrets using: openssl rand -base64 64
JWT_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_BASE64_64
JWT_EXPIRY=1h
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_BASE64_64
JWT_REFRESH_EXPIRY=7d
SESSION_EXPIRY=3600

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# Security
MAX_LOGIN_ATTEMPTS=5
LOCK_TIME_MS=900000
MFA_ENABLED=true

# ============================================
# API GATEWAY (Kong)
# ============================================
KONG_DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
KONG_ADMIN_API=http://kong:8001
KONG_PROXY_URL=http://kong:8000

# ============================================
# MONITORING & OBSERVABILITY
# ============================================
PROMETHEUS_PORT=9090
ENABLE_TRACING=true
ENABLE_HEALTH_CHECK=true
HEALTH_CHECK_INTERVAL_MS=30000

# Elasticsearch
ELASTIC_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS

# ============================================
# CORS & SECURITY
# ============================================
# IMPORTANT: Set to your actual domain(s) in production
CORS_ORIGIN=https://yourdomain.com,https://app.yourdomain.com
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
REQUEST_TIMEOUT_MS=30000
BODY_SIZE_LIMIT=10mb

# ============================================
# STORAGE / FILE UPLOAD
# ============================================
STORAGE_TYPE=s3
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=CHANGE_ME
AWS_SECRET_ACCESS_KEY=CHANGE_ME
AWS_S3_BUCKET=pfms-production
FILE_MAX_SIZE=52428800

# MinIO (if using instead of S3)
MINIO_ROOT_USER=CHANGE_ME
MINIO_ROOT_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
MINIO_ENDPOINT=minio:9000
MINIO_BUCKET=pfms

# ============================================
# EMAIL CONFIGURATION
# ============================================
EMAIL_PROVIDER=sendgrid
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=CHANGE_ME_SENDGRID_API_KEY
SMTP_FROM=noreply@yourdomain.com
SMTP_FROM_NAME=PFMS

# Alternative: SendGrid
SENDGRID_API_KEY=CHANGE_ME

# ============================================
# EXTERNAL SERVICES & APIs
# ============================================
# Stock Market Data
ALPHA_VANTAGE_API_KEY=CHANGE_ME
FINNHUB_API_KEY=CHANGE_ME

# Cryptocurrency
COINGECKO_API_KEY=CHANGE_ME

# Payment Processing
STRIPE_API_KEY=CHANGE_ME
STRIPE_WEBHOOK_SECRET=CHANGE_ME

# SMS/Communications
TWILIO_ACCOUNT_SID=CHANGE_ME
TWILIO_AUTH_TOKEN=CHANGE_ME
TWILIO_PHONE_NUMBER=CHANGE_ME

# ============================================
# FEATURE FLAGS
# ============================================
FEATURE_AI_ENABLED=true
FEATURE_GROUP_FINANCE_ENABLED=true
FEATURE_TAX_SERVICE_ENABLED=true
FEATURE_INVESTMENT_TRACKING_ENABLED=true

# ============================================
# PRODUCTION SETTINGS
# ============================================
DEBUG=false
SEED_DATABASE=false

# ============================================
# SECURITY CHECKLIST
# ============================================
# Before deploying to production, ensure:
# [ ] All CHANGE_ME values have been replaced
# [ ] JWT secrets are at least 64 characters (generated with openssl)
# [ ] Database passwords are at least 32 characters
# [ ] CORS_ORIGIN is set to your actual domain(s)
# [ ] SMTP credentials are configured
# [ ] External API keys are valid
# [ ] MFA is enabled (MFA_ENABLED=true)
# [ ] Debug mode is disabled (DEBUG=false)
# [ ] Swagger is disabled (ENABLE_SWAGGER=false)
# [ ] This file is NOT committed to version control
# [ ] Secrets are stored in a secure secrets manager
